# 词法分析

## 概念

词法分析是通过词法分析器以源码字符串输入，输出标记流，即一连串灯标记。在此阶段编译器从左往右扫描源文件，将字符流分割成一个个的词（token）。一般而言，token常有常数，操作符，分隔符，关键词，标识符等。



## 程序思路

### 1. 读取文件并将源文件保存到一个字符串中

读取文件并利用足够大的一个数组SourceProgram保存源程序

### 2. 跳过注释和一些无用信息（如换行符，制表符）并返回改变后的数组首地址

1. 如果是//类注释，则如遇到‘/’检测下一个元素是否是‘/’，如果是，则直到遇到换行符一直循环往后移动
2. 如果是/* */类注释，则若遇 ‘/ *’,则在遇到下一个 ‘ */'之前一直循环往后

### 3. 扫描返回过后改变灯数组Chan_Program

1. 如果遇到数字则一直向后扫描，直到遇到第一个非数字字符，然后返回258
2. 如果遇到空格则跳过
3. 如果遇到关键词和标识符。关键词和标识符都是以字母或下划线开始、且只有字母、下划线或数字组成。若本轮扫描的第一个字符为字母或下划线时，则一直向后扫描，直到遇到第一个既不是字母、也不是下划线或数字的字符，此时一个完整的词就被扫描出来了，然后，查看这个词是不是为关键字，如果是，则返回关键字代表的 编码 ，如果不是则返回259。
4. 如果遇到字符串。若本次扫描遇到一个双引号，则一直往后扫描直到遇到下一个双引号，并返回260。
5. 如果遇到字符，则判断其后一位是否是对应的组合字符的下一位，并返回对应编码。

## 关键词与符号

### 关键词

**auto       break    case     char        const      continue  **
**default    do       double   else        enum       extern    **
**float      for      goto     if          int        long      **
**register   return   short    signed      sizeof     static  **
**struct     switch   typedef  union       unsigned   void  **

**volatile    while**

## 字符

**"+" , "-" , "*" , "/" , "<" , "<=" , ">" , ">=" , "=" , "==" ,**

**"!=" , ";" , "(" , ")" , "^" , "," , "\"" , "\'" , "#" , "&" ,**
**"&&" , "|" , "||" , "%" , "~" , "<<" , ">>" , "[" , "]" , "{" ,**
**"}" , "\\" , "." , "\?" , ":" , "!"**



-------------------------------------------

2018/2/25